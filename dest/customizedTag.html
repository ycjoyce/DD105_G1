<!DOCTYPE html>
<html lang="en">
<head>  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <title>浪愛回家後台</title>
  <!-- Icons-->
  <link href="node_modules/@coreui/icons/css/coreui-icons.min.css" rel="stylesheet">
  <link href="node_modules/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">
  <link href="node_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="node_modules/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">
  <!-- Main styles for this application-->
  <link href="css/adminManage.css" rel="stylesheet">
</head>

<body class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show">
 <!-- top_header -->
 <header class="app-header navbar">
    <button class="navbar-toggler sidebar-toggler d-lg-none mr-auto" type="button" data-toggle="sidebar-show">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="adminManage.html">
      <img class="navbar-brand-full" src="img/logo-wide.png" width="89" height="25" alt="CoreUI Logo">
      <!-- <img class="navbar-brand-minimized" src="img/brand/sygnet.svg" width="30" height="30" alt="CoreUI Logo"> -->
    </a>
    <button class="navbar-toggler sidebar-toggler d-md-down-none" type="button" data-toggle="sidebar-lg-show">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- <ul class="nav navbar-nav d-md-down-none">
      <li class="nav-item px-3">
        <a class="nav-link" href="#">Dashboard</a>
      </li>
      <li class="nav-item px-3">
        <a class="nav-link" href="#">Users</a>
      </li>
      <li class="nav-item px-3">
        <a class="nav-link" href="#">Settings</a>
      </li>
    </ul> -->
    <ul class="nav navbar-nav ml-auto">
      <!-- <li class="nav-item d-md-down-none">
        <a class="nav-link" href="#">
          <i class="icon-bell"></i>
          <span class="badge badge-pill badge-danger">5</span>
        </a>
      </li> -->
      <!-- <li class="nav-item d-md-down-none">
        <a class="nav-link" href="#">
          <i class="icon-list"></i>
        </a>
      </li> -->
      <!-- <li class="nav-item d-md-down-none">
        <a class="nav-link" href="#">
          <i class="icon-location-pin"></i>
        </a>
      </li> -->
      <li class="nav-item mr-3 adminName"></li>

      <li class="nav-item mr-3 dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
          <img class="img-avatar" src="img/7.jpg" alt="admin@bootstrapmaster.com">
        </a>
        <div class="dropdown-menu dropdown-menu-right">
          <!-- <div class="dropdown-header text-center">
            <strong>Account</strong>
          </div>
          <a class="dropdown-item" href="#">
            <i class="fa fa-bell-o"></i> Updates
            <span class="badge badge-info">42</span>
          </a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-envelope-o"></i> Messages
            <span class="badge badge-success">42</span>
          </a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-tasks"></i> Tasks
            <span class="badge badge-danger">42</span>
          </a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-comments"></i> Comments
            <span class="badge badge-warning">42</span>
          </a>
          <div class="dropdown-header text-center">
            <strong>Settings</strong>
          </div>
          <a class="dropdown-item" href="#">
            <i class="fa fa-user"></i> Profile</a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-wrench"></i> Settings</a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-usd"></i> Payments
            <span class="badge badge-secondary">42</span>
          </a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-file"></i> Projects
            <span class="badge badge-primary">42</span>
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">
            <i class="fa fa-shield"></i> Lock Account</a> -->
          <a class="dropdown-item" href="backend-login.html" style="text-align: center;">登出</a>
        </div>
      </li>
      
    </ul>
    <!-- <button class="navbar-toggler aside-menu-toggler d-md-down-none" type="button" data-toggle="aside-menu-lg-show">
      <span class="navbar-toggler-icon"></span>
    </button> -->
    <!-- <button class="navbar-toggler aside-menu-toggler d-lg-none" type="button" data-toggle="aside-menu-show">
      <span class="navbar-toggler-icon"></span>
    </button> -->
  </header>
  <div class="app-body">
    <div class="sidebar">
      <!-- sidebar menu-->
      <nav class="sidebar-nav">
  <ul class="nav">
    <!-- <li class="nav-item">
        <a class="nav-link" href="index.html">
          <i class="nav-icon icon-speedometer"></i> Dashboard
          <span class="badge badge-primary">NEWs</span>
        </a>
      </li> -->
    <!-- <li class="nav-title">Theme</li>
      <li class="nav-item">
        <a class="nav-link" href="colors.html">
          <i class="nav-icon icon-drop"></i> Colors</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="typography.html">
          <i class="nav-icon icon-pencil"></i> Typography</a>
      </li> -->
    <!-- <li class="nav-title">Components</li> -->

    
    <li class="nav-item">
      <a class="nav-link" href="adminManage.html">管理員管理</a>
    </li>
    
    <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#">
        <i class="nav-icon icon-drop"></i>GPS地圖管理</a>
      <ul class="nav-dropdown-items">
        <li class="nav-item">
          <a class="nav-link" href="petFriendly.html">寵物友善空間管理</a>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="petFriendlyScore.html">寵物友善空間評論管理</a>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="base/carousel.html">寵物友善空間收藏管理</a>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="lostPetReport.html">寵物遺失回報管理</a>
        </li> -->
        
        <!-- <li class="nav-item">
            <a class="nav-link" href="base/forms.html">
              <i class="nav-icon icon-puzzle"></i> Forms</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/jumbotron.html">
              <i class="nav-icon icon-puzzle"></i> Jumbotron</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/list-group.html">
              <i class="nav-icon icon-puzzle"></i> List group</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/navs.html">
              <i class="nav-icon icon-puzzle"></i> Navs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/pagination.html">
              <i class="nav-icon icon-puzzle"></i> Pagination</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/popovers.html">
              <i class="nav-icon icon-puzzle"></i> Popovers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/progress.html">
              <i class="nav-icon icon-puzzle"></i> Progress</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/scrollspy.html">
              <i class="nav-icon icon-puzzle"></i> Scrollspy</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/switches.html">
              <i class="nav-icon icon-puzzle"></i> Switches</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/tables.html">
              <i class="nav-icon icon-puzzle"></i> Tables</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/tabs.html">
              <i class="nav-icon icon-puzzle"></i> Tabs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="base/tooltips.html">
              <i class="nav-icon icon-puzzle"></i> Tooltips</a>
          </li> -->
      </ul>
    </li>
    <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#">
        <i class="nav-icon icon-cursor"></i>募款管理</a>
      <ul class="nav-dropdown-items">
        <li class="nav-item">
          <a class="nav-link" href="fundRaising.html">
            <i class="nav-icon icon-cursor"></i> 募款專案管理</a>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="buttons/button-group.html">
            <i class="nav-icon icon-cursor"></i> 募款收藏管理</a>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="buttons/dropdowns.html">
            <i class="nav-icon icon-cursor"></i> 參與捐款管理</a>
        </li> -->
        <!-- <li class="nav-item">
            <a class="nav-link" href="buttons/brand-buttons.html">
              <i class="nav-icon icon-cursor"></i> Brand Buttons</a>
          </li> -->
      </ul>
    </li>
    <!-- <li class="nav-item">
        <a class="nav-link" href="charts.html">Charts</a>
      </li> -->
    <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#">客製化管理</a>
      <ul class="nav-dropdown-items">
        <!-- <li class="nav-item">
          <a class="nav-link" href="icons/coreui-icons.html">客製化項圈管理</a>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="customizedColor.html">客製化顏色管理</a>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="icons/font-awesome.html">客製化字型管理</a>
        </li> -->
        <li class="nav-item">
          <a class="nav-link" href="customizedTag.html">客製化吊牌管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="orderRecord.html">客製化訂單紀錄管理</a>
        </li>

      </ul>
    </li>
    <!-- <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#">貼文區管理</a>
      <ul class="nav-dropdown-items">
        <li class="nav-item">
          <a class="nav-link" href="postInfo.html">貼文資訊管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="postKey.html">貼文關鍵字管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="postComment.html">貼文留言管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="prNo.html">貼文檢舉管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="postCommentReport.html">貼文留言檢舉管理</a>
        </li>
      </ul>
    </li>
    <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#">照片牆管理</a>
      <ul class="nav-dropdown-items">
        <li class="nav-item">
          <a class="nav-link" href="gcNo.html">照片牆留言管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="galleryPhotoReport.html">照片牆照片檢舉管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="galleryCommentReport.html">照片牆留言檢舉管理</a>
        </li>
      </ul> 
    </li> -->
    <li class="nav-item">
      <a class="nav-link" href="NewsAndActivity.html">活動/新聞/宣導管理</a>
    </li>
    <!-- <li class="nav-item">
      <a class="nav-link" href="widgets.html">常見問答管理</a>
    </li> -->
    <li class="nav-item nav-dropdown">
      <a class="nav-link nav-dropdown-toggle" href="#"><i class="nav-icon icon-pie-chart"></i>會員管理</a>
      <ul class="nav-dropdown-items">
        <li class="nav-item">
          <a class="nav-link" href="memInfo.html" target="_top">會員資料管理</a>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="blacklist.html" target="_top">黑名單管理</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="messageManage.html" target="_top">私信資料管理</a>
        </li> -->
      </ul>
    </li>
  </ul>
</nav>
      <!-- <button class="sidebar-minimizer brand-minimizer" type="button"></button> -->
    </div>
    <main class="main">
      <!-- Breadcrumb-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">首頁</li>
        <li class="breadcrumb-item">客製化管理</li>
        <li class="breadcrumb-item">
          <a href="customizedTag.html">客製化吊牌管理</a>
        </li>
        <!-- <li class="breadcrumb-item active">Dashboard</li> -->
        <!-- Breadcrumb Menu-->
        <li class="breadcrumb-menu d-md-down-none">
          <!-- <div class="btn-group" role="group" aria-label="Button group">
            <a class="btn" href="#">
              <i class="icon-speech"></i>
            </a>
            <a class="btn" href="./">
              <i class="icon-graph"></i>  Dashboard</a>
            <a class="btn" href="#">
              <i class="icon-settings"></i>  Settings</a>
          </div> -->
        </li>
      </ol>
      <div class="container-fluid">
   
       <!-- 中間內容 -->
       <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
<style>
    .table tr {
        /* border: 1px solid red; */
        border-top: 1px solid #c8ced3;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    
    .table tr th {
        /* border: 1px solid blue; */
        /* padding: 0px; */
        min-width: 110px;
    }
    
    .table tr td {
        /* border: 1px solid green; */
        display: flex;
        align-items: center;
        justify-self: flex-end;
        padding: 0px;
    }
    
    input[type="file"] {
        width: 180px;
        margin-left: 30px;
    }
    
    .table tr:nth-child(2) td img {
        padding: 10px 0px;
    }
    
    @media screen and (max-width:575px) {
        .table tr:nth-child(2) td {
            flex-direction: column;
        }
        .table tr:nth-child(3) td {
            flex-direction: column;
        }
    }
</style>
<div class="row equipsRow" id="tagContent">
    <div class="col-xl-6 col-md-12">
        <div class="card" style="margin: 10px;">
            <div class="card-header">新增吊牌</div>
            <div class="card-body">
                <form action="" method="POST" enctype="multipart/form-data">
                    <table class="table">
                        <tr>
                            <th>吊牌名稱</th>
                            <td>
                                <input type="text" name="tagName" id="tagName" maxlength="15">
                            </td>
                        </tr>
                        <tr>
                            <th>輪播預覽圖</th>
                            <td>
                                <img src="" id="tagImage1" style="max-width: 100px;">
                                <input type="file" name="tagSrc1" id="tagSrc1">
                            </td>
                        </tr>
                        <tr>
                            <th>客製化預覽圖</th>
                            <td>
                                <img src="" id="tagImage2" style="max-width: 100px;">
                                <input type="file" name="tagSrc2" id="tagSrc2">
                            </td>
                        </tr>
                        <tr>
                            <th>吊牌所需點數</th>
                            <td>
                                <input type="text" name="tagPoint" id="tagPoint" maxlength="15">
                            </td>
                        </tr>
                    </table>
                    <div class="row">
                        <div class="col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                            <button class="btn btn-pill btn-block btn-primary confirmInsert" type="button" id="addTagBtn">新增吊牌</button>
                        </div>
                        <div class="col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                            <button class="btn btn-pill btn-block btn-secondary cancelClear" type="reset">清除</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    function doFirst() {
        document.getElementById('tagSrc1').onchange = fileChange1;
        document.getElementById('tagSrc2').onchange = fileChange2;
    }

    function fileChange1() {
        let fileA = document.getElementById('tagSrc1').files[0];
        let readFile = new FileReader();
        readFile.readAsDataURL(fileA);
        readFile.addEventListener('load', function() {
            imageData = document.getElementById('tagImage1');
            imageData.src = this.result;
        })
    }

    function fileChange2() {
        let fileB = document.getElementById('tagSrc2').files[0];
        let readFile = new FileReader();
        readFile.readAsDataURL(fileB);
        readFile.addEventListener('load', function() {
            imageData = document.getElementById('tagImage2');
            imageData.src = this.result;
        })
    }
    window.addEventListener('load', doFirst);
</script>

<script>
    function addTag() {
        var formData = new FormData();
        var tagName = document.getElementById('tagName');
        var tagSrc1 = document.getElementById("tagSrc1");
        var tagSrc2 = document.getElementById("tagSrc2");
        var tagPoint = document.getElementById('tagPoint');
        formData.append("tagName", tagName.value);
        formData.append("tagSrc1", tagSrc1.files[0]);
        formData.append("tagSrc2", tagSrc2.files[0]);
        formData.append("tagPoint", tagPoint.value);
        $.ajax({
            url: "php/addTagInfo.php",
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            type: 'post',
            success: function() {
                // window.location.reload();\
                // getTagInfo();
            }
        })
    }
</script>

<script>
    function getTagInfo() {
        $.ajax({
            url: "php/getTagInfo.php",
            type: "post",
            dataType: "json",
            success: function(data) {
                msg = "";
                for (i = 0; i < data.length; i++) {
                    if (data[i].tagStatus == 1) {
                        msg += `
                            <div class="col-xl-6 col-md-12" tagabc="abc">
                                <div class="card" style="margin: 10px;">
                                    <div class="card-header" tagNo="${i + 1}">吊牌${i + 1}號</div>
                                    <div class="card-body">
                                        <form action="" method="POST" enctype="multipart/form-data">
                                            <table class="table">
                                                <tr>
                                                    <th>吊牌名稱</th>
                                                    <td>
                                                        <input type="text" name="tagName" id="tagName${data[i].tagNo}" value="${data[i].tagName}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>輪播預覽圖</th>
                                                    <td>
                                                        <img src="./img/customized_collar/new1/${data[i].tagSrc1}" style="max-width: 100px;">
                                                        <input type="file" name="tagSrc1" id="">
                                                        <input type="text" name="tagSrc1_old" value="${data[i].tagSrc1}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>客製化預覽圖</th>
                                                    <td>
                                                        <img src="./img/customized_collar/new1/${data[i].tagSrc2}" style="max-width: 100px;">
                                                        <input type="file" name="tagSrc2" id="">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>吊牌所需點數</th>
                                                    <td>
                                                        <input type="text" name="tagPoint" id="tagPoint${data[i].tagNo}" value="${data[i].tagPoint}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>上下架狀態</th>
                                                    <td>
                                                        <label class="switch switch-3d switch-success">
                                                        <input class="switch-input equipStatus tagSwitch" type="checkbox" tagNo="${data[i].tagNo}" status="0" checked>
                                                        <span class="switch-slider"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="row">
                                                <div class="col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                                                    <input class="tagNo${data[i].tagNo} btn btn-pill btn-block btn-primary updateTagBtn" type="button" value="確認修改">
                                                </div>
                                                <div class=" col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                                                    <input class="tagNo${data[i].tagNo} btn btn-pill btn-block btn-secondary delTagBtn" type="button" value="刪除吊牌">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (data[i].tagStatus == 0) {
                        msg += `
                            <div class="col-xl-6 col-md-12" tagabc="abc">
                                <div class="card" style="margin: 10px;">
                                    <div class="card-header" tagNo="${i + 1}">吊牌${i + 1}號</div>
                                    <div class="card-body">
                                        <form action="" method="POST" enctype="multipart/form-data">
                                            <table class="table">
                                                <tr>
                                                    <th>吊牌名稱</th>
                                                    <td>
                                                        <input type="text" name="tagName" id="tagName${data[i].tagNo}" value="${data[i].tagName}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>輪播預覽圖</th>
                                                    <td>
                                                        <img src="./img/customized_collar/new1/${data[i].tagSrc1}" style="max-width: 100px;">
                                                        <input type="file" name="tagSrc1" id="">
                                                        <input type="text" name="tagSrc1_old" value="${data[i].tagSrc1}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>客製化預覽圖</th>
                                                    <td>
                                                        <img src="./img/customized_collar/new1/${data[i].tagSrc2}" style="max-width: 100px;">
                                                        <input type="file" name="tagSrc2" id="">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>吊牌所需點數</th>
                                                    <td>
                                                        <input type="text" name="tagPoint" id="tagPoint${data[i].tagNo}" value="${data[i].tagPoint}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>上下架狀態</th>
                                                    <td>
                                                        <label class="switch switch-3d switch-success">
                                                        <input class="switch-input equipStatus tagSwitch" type="checkbox" tagNo="${data[i].tagNo}" status="1">
                                                        <span class="switch-slider"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="row">
                                                <div class="col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                                                    <input class="tagNo${data[i].tagNo} btn btn-pill btn-block btn-primary updateTagBtn" type="button" value="確認修改">
                                                </div>
                                                <div class=" col-6 col-sm-6 col-md-6 col-xl mb-3 mb-xl-0">
                                                    <input class="tagNo${data[i].tagNo} btn btn-pill btn-block btn-secondary delTagBtn" type="button" value="刪除吊牌">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                }
                // $("#tagContent").empty();
                $("#tagContent").append(msg);
            }
        })
    }
    getTagInfo();
    $(document).ready(function() {
        $('#addTagBtn').click(function() {
            if (tagName.value == "") {
                alert("請先設定吊牌姓名");
                return;
            } else if (tagSrc1.value == "" || tagSrc2.value == "") {
                alert("請先上傳吊牌圖片");
                return;
            } else if (tagPoint.value == "") {
                alert("請先設定吊牌點數");
                return;
            } else {
                addTag();
                alert("新增成功");
                window.location.reload();
                // $("#tagContent").append();
            }
        })
    })

    function delTag(sendTagNo) {
        var xhr = new XMLHttpRequest();
        var url = "./php/delTagInfo.php";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        var data_info = `tagNo=${sendTagNo}`;
        xhr.send(data_info);
    }
    $(document).ready(function() {
        $('.delTagBtn').click(function() {
            let result = confirm("確定要刪除嗎?");
            if (result) {
                delTag(this.classList[0].substr(5));
                alert("刪除成功");
                $(this).parent().parent().parent().parent().parent().parent().remove();
            } else {
                return;
            }
        })
    })

    function updateTag(sendTagNo) {
        var xhr = new XMLHttpRequest();
        var url = "php/updateTagInfo.php";
        var updateTagName = document.getElementById(`tagName${sendTagNo}`).value;
        var updateTagPoint = document.getElementById(`tagPoint${sendTagNo}`).value;
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        var data_info = `tagNo=${sendTagNo}&tagName=${updateTagName}&tagPoint=${updateTagPoint}`;
        xhr.send(data_info);
        // console.log(data_info);
    }
    $(document).ready(function() {
        $('.updateTagBtn').click(function() {
            let result = confirm("確定要更新資料嗎?");
            if (result) {
                updateTag(this.classList[0].substr(5));
                alert("更新成功");
            } else {
                return;
            }
        })
    });



    function updateTagRecord(sendTagNo, newTagStatus) {
        var xhr = new XMLHttpRequest();
        var url = "./php/updateTagStatus.php";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        var data_info = `tagNo=${sendTagNo}&tagStatus=${newTagStatus}`;
        xhr.send(data_info);

        xhr.onload = function() {
            if (xhr.status == 200) {}
        }
    }

    $(document).ready(function() {
        $('.tagSwitch').change(function() {
            updateTagRecord($(this).attr("tagNo"), $(this).attr("status"))
            if ($(this).attr("status") == 1) {
                $(this).attr("status", "0");
                alert("吊牌狀態更新成功 , 吊牌已成功上架");
            } else {
                $(this).attr("status", "1");
                alert("吊牌狀態更新成功 , 吊牌已成功下架");
            }
        })
    });
</script>
       <!-- end -->
      </div>
    </main>
    <aside class="aside-menu">
      <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" data-toggle="tab" href="#timeline" role="tab">
            <i class="icon-list"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#messages" role="tab">
            <i class="icon-speech"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#settings" role="tab">
            <i class="icon-settings"></i>
          </a>
        </li>
      </ul>
      <!-- Tab panes-->
      <div class="tab-content">
        <div class="tab-pane active" id="timeline" role="tabpanel">
          <div class="list-group list-group-accent">
            <div
              class="list-group-item list-group-item-accent-secondary bg-light text-center font-weight-bold text-muted text-uppercase small">
              Today</div>
            <div class="list-group-item list-group-item-accent-warning list-group-item-divider">
              <div class="avatar float-right">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
              </div>
              <div>Meeting with
                <strong>Lucas</strong>
              </div>
              <small class="text-muted mr-3">
                <i class="icon-calendar"></i>  1 - 3pm</small>
              <small class="text-muted">
                <i class="icon-location-pin"></i>  Palo Alto, CA</small>
            </div>
            <div class="list-group-item list-group-item-accent-info">
              <div class="avatar float-right">
                <img class="img-avatar" src="img/avatars/4.jpg" alt="admin@bootstrapmaster.com">
              </div>
              <div>Skype with
                <strong>Megan</strong>
              </div>
              <small class="text-muted mr-3">
                <i class="icon-calendar"></i>  4 - 5pm</small>
              <small class="text-muted">
                <i class="icon-social-skype"></i>  On-line</small>
            </div>
            <div
              class="list-group-item list-group-item-accent-secondary bg-light text-center font-weight-bold text-muted text-uppercase small">
              Tomorrow</div>
            <div class="list-group-item list-group-item-accent-danger list-group-item-divider">
              <div>New UI Project -
                <strong>deadline</strong>
              </div>
              <small class="text-muted mr-3">
                <i class="icon-calendar"></i>  10 - 11pm</small>
              <small class="text-muted">
                <i class="icon-home"></i>  creativeLabs HQ</small>
              <div class="avatars-stack mt-2">
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/2.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/3.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/4.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/5.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/6.jpg" alt="admin@bootstrapmaster.com">
                </div>
              </div>
            </div>
            <div class="list-group-item list-group-item-accent-success list-group-item-divider">
              <div>
                <strong>#10 Startups.Garden</strong> Meetup</div>
              <small class="text-muted mr-3">
                <i class="icon-calendar"></i>  1 - 3pm</small>
              <small class="text-muted">
                <i class="icon-location-pin"></i>  Palo Alto, CA</small>
            </div>
            <div class="list-group-item list-group-item-accent-primary list-group-item-divider">
              <div>
                <strong>Team meeting</strong>
              </div>
              <small class="text-muted mr-3">
                <i class="icon-calendar"></i>  4 - 6pm</small>
              <small class="text-muted">
                <i class="icon-home"></i>  creativeLabs HQ</small>
              <div class="avatars-stack mt-2">
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/2.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/3.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/4.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/5.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/6.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                </div>
                <div class="avatar avatar-xs">
                  <img class="img-avatar" src="img/avatars/8.jpg" alt="admin@bootstrapmaster.com">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="tab-pane p-3" id="messages" role="tabpanel">
          <div class="message">
            <div class="py-3 pb-5 mr-3 float-left">
              <div class="avatar">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                <span class="avatar-status badge-success"></span>
              </div>
            </div>
            <div>
              <small class="text-muted">Lukasz Holeczek</small>
              <small class="text-muted float-right mt-1">1:52 PM</small>
            </div>
            <div class="text-truncate font-weight-bold">Lorem ipsum dolor sit amet</div>
            <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
              incididunt...</small>
          </div>
          <hr>
          <div class="message">
            <div class="py-3 pb-5 mr-3 float-left">
              <div class="avatar">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                <span class="avatar-status badge-success"></span>
              </div>
            </div>
            <div>
              <small class="text-muted">Lukasz Holeczek</small>
              <small class="text-muted float-right mt-1">1:52 PM</small>
            </div>
            <div class="text-truncate font-weight-bold">Lorem ipsum dolor sit amet</div>
            <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
              incididunt...</small>
          </div>
          <hr>
          <div class="message">
            <div class="py-3 pb-5 mr-3 float-left">
              <div class="avatar">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                <span class="avatar-status badge-success"></span>
              </div>
            </div>
            <div>
              <small class="text-muted">Lukasz Holeczek</small>
              <small class="text-muted float-right mt-1">1:52 PM</small>
            </div>
            <div class="text-truncate font-weight-bold">Lorem ipsum dolor sit amet</div>
            <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
              incididunt...</small>
          </div>
          <hr>
          <div class="message">
            <div class="py-3 pb-5 mr-3 float-left">
              <div class="avatar">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                <span class="avatar-status badge-success"></span>
              </div>
            </div>
            <div>
              <small class="text-muted">Lukasz Holeczek</small>
              <small class="text-muted float-right mt-1">1:52 PM</small>
            </div>
            <div class="text-truncate font-weight-bold">Lorem ipsum dolor sit amet</div>
            <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
              incididunt...</small>
          </div>
          <hr>
          <div class="message">
            <div class="py-3 pb-5 mr-3 float-left">
              <div class="avatar">
                <img class="img-avatar" src="img/avatars/7.jpg" alt="admin@bootstrapmaster.com">
                <span class="avatar-status badge-success"></span>
              </div>
            </div>
            <div>
              <small class="text-muted">Lukasz Holeczek</small>
              <small class="text-muted float-right mt-1">1:52 PM</small>
            </div>
            <div class="text-truncate font-weight-bold">Lorem ipsum dolor sit amet</div>
            <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
              incididunt...</small>
          </div>
        </div>
        <div class="tab-pane p-3" id="settings" role="tabpanel">
          <h6>Settings</h6>
          <div class="aside-options">
            <div class="clearfix mt-4">
              <small>
                <b>Option 1</b>
              </small>
              <label class="switch switch-label switch-pill switch-success switch-sm float-right">
                <input class="switch-input" type="checkbox" checked="">
                <span class="switch-slider" data-checked="On" data-unchecked="Off"></span>
              </label>
            </div>
            <div>
              <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua.</small>
            </div>
          </div>
          <div class="aside-options">
            <div class="clearfix mt-3">
              <small>
                <b>Option 2</b>
              </small>
              <label class="switch switch-label switch-pill switch-success switch-sm float-right">
                <input class="switch-input" type="checkbox">
                <span class="switch-slider" data-checked="On" data-unchecked="Off"></span>
              </label>
            </div>
            <div>
              <small class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua.</small>
            </div>
          </div>
          <div class="aside-options">
            <div class="clearfix mt-3">
              <small>
                <b>Option 3</b>
              </small>
              <label class="switch switch-label switch-pill switch-success switch-sm float-right">
                <input class="switch-input" type="checkbox">
                <span class="switch-slider" data-checked="On" data-unchecked="Off"></span>
              </label>
            </div>
          </div>
          <div class="aside-options">
            <div class="clearfix mt-3">
              <small>
                <b>Option 4</b>
              </small>
              <label class="switch switch-label switch-pill switch-success switch-sm float-right">
                <input class="switch-input" type="checkbox" checked="">
                <span class="switch-slider" data-checked="On" data-unchecked="Off"></span>
              </label>
            </div>
          </div>
          <hr>
          <h6>System Utilization</h6>
          <div class="text-uppercase mb-1 mt-4">
            <small>
              <b>CPU Usage</b>
            </small>
          </div>
          <div class="progress progress-xs">
            <div class="progress-bar bg-info" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
              aria-valuemax="100"></div>
          </div>
          <small class="text-muted">348 Processes. 1/4 Cores.</small>
          <div class="text-uppercase mb-1 mt-2">
            <small>
              <b>Memory Usage</b>
            </small>
          </div>
          <div class="progress progress-xs">
            <div class="progress-bar bg-warning" role="progressbar" style="width: 70%" aria-valuenow="70"
              aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <small class="text-muted">11444GB/16384MB</small>
          <div class="text-uppercase mb-1 mt-2">
            <small>
              <b>SSD 1 Usage</b>
            </small>
          </div>
          <div class="progress progress-xs">
            <div class="progress-bar bg-danger" role="progressbar" style="width: 95%" aria-valuenow="95"
              aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <small class="text-muted">243GB/256GB</small>
          <div class="text-uppercase mb-1 mt-2">
            <small>
              <b>SSD 2 Usage</b>
            </small>
          </div>
          <div class="progress progress-xs">
            <div class="progress-bar bg-success" role="progressbar" style="width: 10%" aria-valuenow="10"
              aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <small class="text-muted">25GB/256GB</small>
        </div>
      </div>
    </aside>
  </div>
  <footer>
    <div class="page_top" id="page_top">
        <span class="titleFont smalltext">PAGE TOP</span>
    </div>
    <p class="titleFont smalltext">
        © 2020 Bring Love Home
    </p>
</footer>

<script src="./js/page_top.js"></script>

  <!-- CoreUI and necessary plugins-->
  <script src="./js/jquery.min.js"></script>
  <script src="./js/popper.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>
  <script src="./js/pace.min.js"></script>
  <script src="./js/perfect-scrollbar.min.js"></script>
  <script src="./js/coreui.min.js"></script>
  <script src="./js/backend-managerName.js"></script>
</body>
</html>